@using MudBlazor
@inherits ComputedStateComponent<int>
@inject Session _session
@inject IPostService _todos
@inject ILogger<PostCountBadge> _log

@{
    _log.LogInformation("Rendering");
    var summary = State.ValueOrDefault;
}

<MudChip Color="MudBlazor.Color.Primary"><b>@summary</b> total</MudChip>

@code {

    protected override Task<int> ComputeState(CancellationToken cancellationToken)
        => _todos.GetPostCount(_session, cancellationToken);

}